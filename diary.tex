% UTF-8 encoding
% Compile with latex+dvipdfmx, pdflatex, xelatex or lualatex
% XeLaTeX is recommanded
\documentclass[UTF8]{ctexart}
\input{common}
\input{format}

\title{\Huge 2019日记}
\author{严超}
\date{2019}

\begin{document}
\maketitle
\newpage
%\tableofcontents
\foreach \Year in {19,...,19}
{   \foreach \Month in {01,...,12} 
    {   \foreach \Day in {01,...,31}
        {   \IfFileExists{data/\Year/\Month/\Day}
                {   \openin\mysource=data/\Year/\Month/\Day.tex
                    \read\mysource to \firstline
                    \closein\mysource
                    \xdef\writetitle{1}
                    \begin{diary}{\Year-\Month-\Day}{\firstline}    
                        \xdef\writetitle{0}
                        \input{data/\Year/\Month/\Day}
                    \end{diary} 
        }
        {   % files does not exist, so nothing to do
        }

        }  
    }
}

\end{document}
